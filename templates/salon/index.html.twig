{% extends 'base.html.twig' %}

{% block title %}Salon{% endblock %}



{% block invitation %}
    <li>
        <p>Inviter un utilisateur sur le salon :</p>

        {{ form_start(form, {'attr': {'id': 'invitation'}}) }}
        {{ form_row(form.email,{'label': 'Email'}) }}
        {{ form_row(form.save, {'label': 'Inviter'}) }}
        {{ form_end(form) }}

    </li>





{% endblock %}





{% block body %}


    <h1>Titre : {{ salon.title }}</h1>
    <div id="salon-container" data-salon-id="{{ salon.id }}"></div>
    <div data-controller="countdown" id="time" data-countdown-target="id" data-salon-id="{{ salon.id }}">
        <p><span id="time_message" data-countdown-target="message"></span><span data-countdown-target="count"></span></p>

    </div>

    <p>Description : {{ salon.description }}</p>
<turbo-frame id="salon_{{ salon.id }}">
    <button><a href="{{ path('salon.edit', {id: salon.id}) }}">Editer le salon</a></button>
</turbo-frame>
    <button><a href="{{ path('salon.delete', {id: salon.id}) }}">Supprimer le salon</a></button>
    <section>
        <h2>Liste des sujets à voter</h2>
        {% for sujet in allsujets %}
            <article>

                <turbo-frame id="sujet_{{ sujet.id }}">
                    <a href="{{ path('sujet.edit', {id: sujet.id}) }}"><h3>Sujet : {{ sujet.title }}</h3></a>
                </turbo-frame>


                <p>
                    Description : {{ sujet.description }}
                </p>

                <button><a href="{{ path('sujet.edit', {id: sujet.id}) }}">Modifier le sujet</a></button>
                <button><a href="{{ path('sujet.delete', {id: sujet.id}) }}">Supprimer le sujet</a></button>
                <a href="{{ path('proposal.create', {id: sujet.id}) }}">Créer une proposition</a>
                <ul>
                    {% for proposal in sujet.proposals %}
                        <li>
                            <turbo-frame id="proposal_{{ proposal.id }}">
                                <a href="{{ path('proposal.edit', {id: proposal.id}) }}"><p>{{ proposal.title }} </p>
                                </a>
                                <p>{{ proposal.description }}</p>
                            </turbo-frame>

                            <a href="{{ path('proposal.edit', {id: proposal.id}) }}">Editer</a>
                            <a href="{{ path('proposal.delete', {id: proposal.id}) }}">Supprimer</a>
                        </li>
                    {% endfor %}

                </ul>
            </article>
        {% endfor %}
        <button><a href="{{ path('sujet.create', {id: salon.id}) }}">Créer un nouveau sujet</a></button>
    </section>
    {% block chat %}
        {{ include('chat/chat.html.twig') }}
    {% endblock %}

{% endblock %}
